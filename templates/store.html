{%  extends "base.html" %}

{%  block content %}
<div class="store-container">
    <div class="store-header">
        <h1>C-Store</h1>
        <div class="credits">
        <h3>Current Balance: ${{ current_user.current_balance }}</h3>
        <h3>Credit Limit: ${{ current_user.credit_limit }}</h3>
        <p>Availible Credit: ${{ current_user.credit_limit - current_user.current_balance }}</p>

        </div>
    </div>

    <div class="products-grid">
        <div class="product-card">
            <div class="product-info">
                <h3>Cool Kat</h3>
                <img src="/static/cat.png" alt="cat", width="150", height="150">
                <p class="product-price">$100</p>
                <button class="buy-btn" data-item="I1" data-price="100">Buy Now</button>
            </div>
        </div> <!-- Item One -->

        <div class="product-card">
            <div class="product-info">
                <h3>Cooler Kat</h3>
                <img src="/static/cat1.png" alt="cat", width="150", height="150">
                <p class="product-price">$367</p>
                <button class="buy-btn" data-item="I2" data-price="367">Buy Now</button>
            </div>
        </div> <!-- Item 2 -->

        <div class="product-card">
            <div class="product-info">
                <h3>Coolest Kat</h3>
                <img src="/static/cat2.png" alt="cat", width="150", height="150">
                <p class="product-price">$800</p>
                <button class="buy-btn" data-item="I3" data-price="800">Buy Now</button>
            </div>
        </div> <!-- Item 3 -->

        <div class="purchase-modal" >
            <div class="modal-content">
                <span class="close-modal">&times;</span>
                <h2>Confirm Purchase</h2>
                <p id="modal-item-name"></p>
                <p id="modal-item-price"></p>

                <form action="{{ url_for('make_purchase') }}" method="POST">
                    <input type="hidden" id="amount" name="amount" value="">
                    <input type="hidden" id="description" name="description" value="">
                    <input type="hidden" id="item_id" name="item_id" value="">
                    <button type="submit" class="confirm-purchase-btn">Confirm Purchase</button>

                </form>
            </div>
        </div> <!-- modal for purchases -->
    </div>
</div>
{% endblock %}

<script>
    document.addEventListener("DOMContentLoaded", function() {
        const buy = document.querySelectorAll('.buy-btn');

    });
</script>